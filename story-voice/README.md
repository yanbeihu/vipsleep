# 故事之声 - 使用说明

## 📖 项目简介

**故事之声**是一个AI智能文生语音故事平台，能够根据小说内容自动分析角色，为每个角色生成专属语音，创建沉浸式的听觉故事体验。

## 🎯 核心功能

### 1. 智能角色分析
- 自动识别小说中的所有角色
- 分析角色的性别、年龄、性格特征
- 提取对话内容统计

### 2. 专属语音定制
- 支持7种以上的AI语音音色
- 女声：小荷（温柔）、Vivi（知性）、雪阿姨（温暖）、可爱少女
- 男声：云舟（沉稳）、小天（阳光）、大毅（厚重）
- 旁白：标准男声、标准女声

### 3. 语音试听
- 每个角色可以试听多种音色
- 实时对比不同语音效果
- 选择最适合的语音

### 4. 音频生成
- 支持MP3、WAV格式
- 支持24000Hz、48000Hz采样率
- 可调节语速（慢速/正常/快速）
- 可添加背景音乐（轻柔/戏剧）

### 5. 故事管理
- 查看所有创建的故事
- 在线播放音频
- 下载音频文件
- 删除不需要的故事

## 🚀 如何使用

### 方式一：本地部署

1. **访问文件**
   ```
   访问路径：/workspace/projects/story-voice/index.html
   ```

2. **直接用浏览器打开**
   - 双击 `index.html` 文件
   - 或右键选择"用浏览器打开"

### 方式二：GitHub Pages 部署

1. **文件已推送到仓库**
   - 文件位置：`yanbeihu/vipsleep` 仓库的 `story-voice/` 目录

2. **访问网站**
   ```
   https://yanbeihu.github.io/vipsleep/story-voice/
   ```

3. **如果访问不到，需要配置GitHub Pages**
   - 进入仓库的 Settings → Pages
   - 将 Source 设置为 `main` 分支
   - 等待部署完成（1-2分钟）

## 📱 页面说明

### 首页 (index.html)
- 产品介绍和核心功能展示
- 如何使用步骤说明
- 快速进入创建页面

### 创建故事 (create.html)
**三步创建流程：**

1. **输入文本**
   - 输入故事标题
   - 粘贴或输入故事内容
   - 可以加载示例文本测试

2. **角色分析**
   - AI自动分析所有角色
   - 显示角色信息（性别、年龄、性格）
   - 为每个角色选择语音
   - 试听不同音色

3. **生成音频**
   - 设置音频格式和采样率
   - 选择语速和背景音乐
   - 点击生成按钮
   - 自动跳转到我的故事页面

### 我的故事 (my-stories.html)
- 查看所有创建的故事
- 显示故事信息（标题、时长、角色）
- 播放音频
- 下载音频文件
- 删除故事

### 关于页面 (about.html)
- 产品使命和愿景
- 技术优势说明
- 团队介绍
- 联系方式

## 🔧 技术实现（前端）

### 当前实现
- ✅ 完整的UI界面
- ✅ 角色分析（模拟）
- ✅ 语音选择UI
- ✅ 多步骤流程
- ✅ 响应式设计
- ✅ 本地数据管理（JavaScript对象）

### 需要后端支持的功能
以下功能标记为"模拟实现"，实际部署需要后端API：

1. **真实角色分析**
   ```javascript
   // 当前是模拟，需要调用AI分析API
   storyData.characters = [...]; // 硬编码的示例数据
   ```

2. **真实语音生成**
   ```javascript
   // 当前是模拟，需要调用TTS API
   function generateAudio() {
       // 需要集成语音生成服务
   }
   ```

3. **数据持久化**
   ```javascript
   // 当前是内存存储，需要数据库
   localStorage.setItem('stories', JSON.stringify(stories));
   ```

## 🔌 后端集成建议

### API端点设计

```
POST /api/analyze
请求：{ text: "故事文本" }
响应：{ characters: [...] }

POST /api/generate
请求：{
    story: "故事内容",
    characters: [...],
    voiceSettings: {...},
    settings: {...}
}
响应：{ audioUrl: "音频文件地址" }

GET /api/stories
响应：{ stories: [...] }

DELETE /api/stories/:id
响应：{ success: true }
```

### 语音生成服务

可以使用现有的语音生成技能：
- **coze-voice-gen** (`/workspace/projects/workspace/skills/coze-voice-gen`)
- 集成方式：通过 npx ts-node scripts/tts.ts 调用

### 数据存储

选项：
1. **本地文件系统**：生成的MP3文件保存在服务器
2. **云存储**：使用阿里云OSS、AWS S3等
3. **临时存储**：音频链接有有效期，定期清理

## 🎨 自定义和扩展

### 添加新语音

在 `create.html` 中的 `availableVoices` 对象添加：

```javascript
const availableVoices = {
    female: [
        // ... 现有语音
        { id: 'new_voice_id', name: '新语音', description: '描述' }
    ]
};
```

### 修改主题色

在所有HTML文件中替换 `#667eea` 和 `#764ba2` 为新颜色。

### 添加新页面

1. 在 `story-voice/` 目录创建新的HTML文件
2. 复制导航栏样式
3. 添加页面链接到 `nav` 中

## 📊 数据统计

当前显示的统计数据（my-stories.html）：
- 已创建故事：3个
- 音频总时长：45分钟
- 扮演角色：12个

实际部署时应该从后端API动态获取。

## 🎯 使用场景

1. **小说作者**
   - 为自己的小说创建试听版本
   - 测试不同语音效果

2. **教育工作者**
   - 将教材转换为有声读物
   - 帮助学生更好地理解

3. **播客创作者**
   - 快速生成音频内容
   - 节省录制时间

4. **文学爱好者**
   - 让喜爱的小说"活"起来
   - 分享给朋友听

## 🔒 隐私和安全

- 用户上传的文本内容需要加密存储
- 生成的音频文件应定期清理
- 用户可以随时删除自己的数据

## 📞 技术支持

如需技术支持或功能定制，请联系：
- 邮件：contact@storyvoice.com
- 在线客服：网站右下角

## 📝 更新日志

### v1.0 (2024-02-18)
- ✅ 基础功能完成
- ✅ UI界面完成
- ✅ 角色分析UI
- ✅ 语音选择UI
- ✅ 故事管理UI
- ✅ 响应式设计

### 待开发功能
- [ ] 真实角色分析API
- [ ] 真实语音生成集成
- [ ] 用户账户系统
- [ ] 云端存储集成
- [ ] 分享功能
- [ ] 评论和评分
- [ ] VIP会员体系

---

**祝你创作愉快！** 🎙️✨
